@{
    ViewBag.Title = "list";
    Layout = "~/Views/Shared/_Layout_DJZC.cshtml";
}
@model List<crsri.cn.Model.t_web_article_model>
<div class="mainCntPage">
    <div class="fy_con warp">
        <div class="fy_con_l">
            <div class="fy_con_l_t">

                @{
                    List<crsri.cn.Model.t_web_special_model> djzcItems = ViewBag.djzcItems as List<crsri.cn.Model.t_web_special_model>;
                    string curId = ViewBag.specialID;
                    <label style="color: #fedf22;">@djzcItems.FindAll(a => a.specialID == curId).First().specialName</label>
                }
            </div>
            <div class="fy_con_l_u">
                <ul>
                    @{
                        foreach (crsri.cn.Model.t_web_article_model m in Model)
                        {
                            <li>
                                <a href="/Djzc/show/@inside.crsri.Utility.helper.UrlEncry(@m.articleID)" target="_blank">@System.Web.HttpUtility.HtmlDecode(@m.title)</a>
                                <span>@Convert.ToDateTime(@m.releaseTime).ToString("yyyy-MM-dd")</span>
                            </li>
                        }
                    }
                </ul>

            </div>

            <div class="fenye">

                @{
                    int pageSize = 15;
                    int totalCount = Convert.ToInt32(ViewBag.totalCount);
                    int maxPage = totalCount % pageSize == 0 ? totalCount / pageSize : totalCount / pageSize + 1;

                    if (maxPage > 1)
                    {
                        int curPage = Convert.ToInt32(ViewBag.currentPage);
                        int showPage = maxPage < 3 ? maxPage : 3;
                        List<int> txtPageNum = new List<int>();
                        if (maxPage <= showPage)
                        {
                            for (int i = 1; i <= maxPage; i++)
                            {
                                txtPageNum.Add(i);
                            }
                        }
                        else
                        {
                            int startNum = curPage > 2 ? curPage - 2 : 1;

                            for (int i = startNum; i <= startNum + 2; i++)
                            {
                                txtPageNum.Add(i);
                            }


                        }

                        int prePage = curPage - 1;
                        int nextPage = curPage + 1;
                        int hidePage = txtPageNum.Last();

                        string htmlPre = string.Format("<a href='/Djzc/list/{0}/{1}'>上一页</a>", Model.First().specialID, prePage == 0 ? 1 : prePage);
                        string htmlNext = string.Format("<a href='/Djzc/List/{0}/{1}'>下一页</a>", Model.First().specialID, nextPage > maxPage ? maxPage : nextPage);
                        string htmlInfo = string.Format("<span>共{0}页</span>", maxPage);
                        string htmlGo = string.Format("<span>转到第<input type='text'>页</span><a href='javascript:goPage();' class='ok'>确定</a></div>");

                        @Html.Raw(htmlPre);

                                          foreach (int num in txtPageNum)
                                          {
                                              if (num == curPage)
                                              {
                                                @Html.Raw(string.Format("<a href='/Djzc/list/{0}/{1}' class='current'>{1}</a>", Model.First().specialID, num));
                                              }
                                              else
                                              {
                                                @Html.Raw(string.Format("<a href='/Djzc/list/{0}/{1}'>{1}</a>", Model.First().specialID, num));
                                              }
                                          }
                                        <a href="/Article/List/@Model.First().specialID/@hidePage">...</a>
                                        <a href="/Article/List/@Model.First().specialID/@maxPage">@maxPage</a>

                                        @Html.Raw(htmlNext);
                    @*<p>
                            @Html.Raw(htmlGo);
                        </p>*@
                    }

                }
            </div>
        </div>
        @*<div class="fy_con_r">
                <div class="fy_con_r_1">
                    <div class="fy_con_r_1_t">单位动态</div>
                    <div class="fy_con_r_1_u">
                        <ul>
                            <li><a href="/a/danweidongtai/gongzuodongtai/" class="thisclass">工作动态</a></li>
                            <li><a href="/a/danweidongtai/renshirenmian/">新闻</a></li>

                            <li><a href="/a/danweidongtai/shizhengyaowen/">要闻</a></li>

                            <li><a href="/a/danweidongtai/tongzhigonggao/">通知公告</a></li>

                        </ul>
                    </div>
                </div>

            </div>*@
    </div>
</div>
