@{
    ViewBag.Title = "list";
    Layout = "~/Views/Shared/_Layout_AQSC.cshtml";
}
@model List<crsri.cn.Model.t_web_article_model>
<div class="list_tit" style="border:none">
    <div class="list_head">
        <h3>
            @{
                List<crsri.cn.Model.t_web_special_model> djzcItems = ViewBag.aqscItems as List<crsri.cn.Model.t_web_special_model>;
                string curId = ViewBag.specialID;
                <label style="color: #fedf22;">@djzcItems.FindAll(a => a.specialID == curId).First().specialName</label>
            }
        </h3>
    </div>

    <div class="list_table">
        <ul>
            @{
                foreach (crsri.cn.Model.t_web_article_model m in Model)
                {
                    <li>
                        <span class="list_table_title">
                            <a href="/aqsc/show/@inside.crsri.Utility.helper.UrlEncry(@m.articleID)" target="_blank">
                                <span class="listItem_date r">@Convert.ToDateTime(@m.releaseTime).ToString("yyyy-MM-dd")</span><span style="color:#333333;">@System.Web.HttpUtility.HtmlDecode(@m.title)</span>
                            </a>
                        </span>
                    </li>
                }
            }
        </ul>
    </div>


    <div class="fenye">

        @{
            int pageSize = 20;
            int totalCount = Convert.ToInt32(ViewBag.totalCount);
            int maxPage = totalCount % pageSize == 0 ? totalCount / pageSize : totalCount / pageSize + 1;

            if (maxPage > 1)
            {
                int curPage = Convert.ToInt32(ViewBag.currentPage);
                int showPage = maxPage < 3 ? maxPage : 3;
                List<int> txtPageNum = new List<int>();
                if (maxPage <= showPage)
                {
                    for (int i = 1; i <= maxPage; i++)
                    {
                        txtPageNum.Add(i);
                    }
                }
                else
                {
                    int startNum = curPage > 2 ? curPage - 2 : 1;

                    for (int i = startNum; i <= startNum + 2; i++)
                    {
                        txtPageNum.Add(i);
                    }


                }

                int prePage = curPage - 1;
                int nextPage = curPage + 1;
                int hidePage = txtPageNum.Last();

                string htmlPre = string.Format("<a href='/aqsc/list/{0}/{1}'>上一页</a>", Model.First().specialID, prePage == 0 ? 1 : prePage);
                string htmlNext = string.Format("<a href='/aqsc/List/{0}/{1}'>下一页</a>", Model.First().specialID, nextPage > maxPage ? maxPage : nextPage);
                string htmlInfo = string.Format("<span>共{0}页</span>", maxPage);
                string htmlGo = string.Format("<span>转到第<input type='text'>页</span><a href='javascript:goPage();' class='ok'>确定</a></div>");

                @Html.Raw(htmlPre);

                                  foreach (int num in txtPageNum)
                                  {
                                      if (num == curPage)
                                      {
                                        @Html.Raw(string.Format("<a href='/aqsc/list/{0}/{1}' class='current'>{1}</a>", Model.First().specialID, num));
                                      }
                                      else
                                      {
                                        @Html.Raw(string.Format("<a href='/aqsc/list/{0}/{1}'>{1}</a>", Model.First().specialID, num));
                                      }
                                  }
                                <a href="/aqsc/List/@Model.First().specialID/@hidePage">...</a>
                                <a href="/aqsc/List/@Model.First().specialID/@maxPage">@maxPage</a>

                                @Html.Raw(htmlNext);
            @*<p>
                    @Html.Raw(htmlGo);
                </p>*@
            }

        }
    </div>

</div>
